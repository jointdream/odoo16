<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="frontend_layout" name="Main Frontend Layout" inherit_id="web.frontend_layout">
        <xpath expr="//div[@id='wrapwrap']" position="attributes">
            <attribute name="t-attf-class" add="#{request.env['res.lang']._lang_get_direction(request.env.lang) == 'rtl' and 'o_rtl' or ''}" separator=" "/>
            <attribute name="t-attf-class" add="#{'o_portal' if is_portal else ''}" separator=" "/>
        </xpath>
        <xpath expr="//div[@id='wrapwrap']/header/img" position="replace">
            <t t-cache="res_company">
                <nav class="navbar navbar-expand navbar-light bg-light">
                    <div class="container">
                        <a href="/" class="navbar-brand logo">
                            <img t-att-src="'/logo.png?company=%s' % res_company.id" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
                        </a>
                        <ul id="top_menu" class="nav navbar-nav ms-auto">
                            <t t-call="portal.placeholder_user_sign_in">
                                <t t-set="_item_class" t-value="'nav-item'"/>
                                <t t-set="_link_class" t-value="'nav-link'"/>
                            </t>
                            <t t-call="portal.user_dropdown">
                                <t t-set="_user_name" t-value="true"/>
                                <t t-set="_item_class" t-value="'nav-item dropdown'"/>
                                <t t-set="_link_class" t-value="'nav-link'"/>
                                <t t-set="_dropdown_menu_class" t-value="'dropdown-menu-end'"/>
                            </t>
                        </ul>
                    </div>
                </nav>
            </t>
        </xpath>
        <xpath expr="//div[@id='wrapwrap']/main/t[@t-out='0']" position="before">
            <div t-if="o_portal_fullwidth_alert" class="alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden">
                <div class="container">
                    <t t-out="o_portal_fullwidth_alert"/>
                </div>
            </div>
        </xpath>
    </template>

    <!-- Added by another template so that it can be disabled if needed -->
    <template id="footer_language_selector" inherit_id="portal.frontend_layout" name="Footer Language Selector">
        <xpath expr="//*[hasclass('o_footer_copyright_name')]" position="after">
            <t id="language_selector_call" t-call="portal.language_selector">
                <t t-set="_div_classes" t-value="(_div_classes or '') + ' dropup'"/>
            </t>
        </xpath>
    </template>

    <template id="language_selector" name="Language Selector">
        <t t-nocache="The query strings can change for the same page and the same rendering."
           t-nocache-no_text="no_text"
           t-nocache-_div_classes="_div_classes"
           t-nocache-_btn_class="_btn_class"
           t-nocache-_dropdown_menu_class="_dropdown_menu_class">
            <t t-set="active_lang" t-value="list(filter(lambda lg : lg[0] == lang, languages))[0]"/>
            <t t-set="language_selector_visible" t-value="len(languages) &gt; 1"/>
            <div t-attf-class="js_language_selector #{_div_classes} d-print-none" t-if="language_selector_visible">
                <button t-attf-class="btn btn-sm btn-outline-secondary border-0 dropdown-toggle #{_btn_class}" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span t-if="not no_text"
                            class="align-middle"
                            t-esc="active_lang[2].split('/').pop()"/>
                </button>
                <div t-attf-class="dropdown-menu #{_dropdown_menu_class}" role="menu">
                    <t t-foreach="languages" t-as="lg">
                        <a t-att-href="url_for(request.httprequest.path + '?' + keep_query(), lang_code=lg[0])"
                        t-attf-class="dropdown-item js_change_lang #{active_lang == lg and 'active'}"
                        t-att-data-url_code="lg[1]">
                            <span t-if="not no_text" t-esc="lg[2].split('/').pop()"/>
                        </a>
                    </t>
                </div>
            </div>
        </t>
    </template>

    <template id="user_dropdown" name="Portal User Dropdown">
        <t t-nocache="Each user is different regardless of the page visited."
           t-nocache-_avatar="_avatar"
           t-nocache-_icon="_icon"
           t-nocache-_icon_class="_icon_class"
           t-nocache-_user_name="_user_name"
           t-nocache-_user_name_class="_user_name_class"
           t-nocache-_item_class="_item_class"
           t-nocache-_link_class="_link_class"
           t-nocache-_dropdown_menu_class="_dropdown_menu_class">
            <t t-set="is_connected" t-value="not user_id._is_public()"/>
            <li t-if="is_connected" t-attf-class="#{_item_class} o_no_autohide_item">
                <a href="#" role="button" data-bs-toggle="dropdown" t-attf-class="dropdown-toggle #{_link_class}">
                    <t t-if="_avatar">
                        <t t-set="avatar_source" t-value="image_data_uri(user_id.avatar_256)"/>
                        <img t-att-src="avatar_source" t-attf-class="rounded-circle o_object_fit_cover #{_avatar_class}" width="24" height="24" alt="" loading="eager"/>
                    </t>
                    <i t-if="_icon" t-attf-class="fa fa-1x fa-fw fa-user-circle-o #{_icon_class}"/>
                    <span t-if="_user_name" t-attf-class="#{_user_name_class}" t-esc="user_id.name[:23] + '...' if user_id.name and len(user_id.name) &gt; 25 else user_id.name"/>
                </a>
                <div t-attf-class="dropdown-menu js_usermenu #{_dropdown_menu_class}" role="menu">
                    <a groups="base.group_user" href="/web" role="menuitem" class="dropdown-item ps-3" id="o_backend_user_dropdown_link">
                        <i class="fa fa-fw fa-th me-1 small text-muted"/> Apps
                    </a>
                    <div id="o_logout_divider" class="dropdown-divider"/>
                    <a t-attf-href="/web/session/logout?redirect=/" role="menuitem" id="o_logout" class="dropdown-item ps-3">
                        <i class="fa fa-fw fa-sign-out me-1 small text-muted"/> Logout
                    </a>
                </div>
            </li>
        </t>
    </template>

    <template id="portal_breadcrumbs" name="Portal Breadcrumbs">
        <ol t-if="page_name != 'home'" class="o_portal_submenu breadcrumb mb-0 py-2 flex-grow-1">
            <li class="breadcrumb-item ms-1"><a href="/my/home" aria-label="Home" title="Home"><i class="fa fa-home"/></a></li>
            <li t-if="page_name == 'my_details'" class="breadcrumb-item">Details</li>
        </ol>
    </template>

    <template id="portal_back_in_edit_mode" name="Back to edit mode">
        <div t-ignore="true" class="text-center">
            <t t-if="custom_html" t-out="custom_html"/>
            <t t-else="">This is a preview of the customer portal.</t>
            <a t-att-href="backend_url"><i class="fa fa-arrow-right me-1"/>Back to edit mode</a>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </template>

    <template id="portal_layout" name="Portal Layout">
        <t t-call="portal.frontend_layout">
            <t t-set="is_portal" t-value="True"/>

            <div t-if="not no_breadcrumbs and not my_details and not breadcrumbs_searchbar" class="o_portal container mt-3">
                <div class="row align-items-center bg-white g-0 border rounded">
                    <div class="col-10">
                        <t t-call="portal.portal_breadcrumbs"></t>
                    </div>
                    <div t-if="prev_record or next_record" class="col-2 flex-grow-0 text-center">
                        <t t-call='portal.record_pager'/>
                    </div>
                </div>
            </div>
            <div id="wrap" class='o_portal_wrap'>
                <div class="container mb64">
                    <t t-if="my_details">
                        <div class="row justify-content-between mt-4">
                            <div t-attf-class="col-12 col-md col-lg-6">
                                <t t-out="0"/>
                            </div>
                            <div id="o_my_sidebar" class="pt-3 pt-lg-0 col-12 col-md col-lg-4 col-xl-3 o_my_sidebar">
                                <div class="o_my_contact" t-if="sales_user">
                                    <t t-call="portal.portal_contact"/>
                                </div>
                                <div class="o_portal_my_details">
                                    <h4>Details <a role="button" href="/my/account" class="btn btn-sm btn-link"><i class="fa fa-pencil"/> Edit</a></h4>
                                    <hr class="mt-1 mb-0"/>
                                    <div t-field="user_id.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone", "address", "name"]}'/>
                                </div>
                                <div class="o_portal_my_security mt-3">
                                    <h4>Account Security </h4>
                                    <hr class="mt-1 mb-1"/>
                                    <a href="/my/security"><i class="fa fa-pencil mx-1"/>Edit Security Settings</a>
                                </div>
                            </div>
                        </div>
                    </t>
                    <t t-else="">
                        <t t-out="0"/>
                    </t>
                </div>
            </div>
        </t>
    </template>

    <template id="placeholder_user_sign_in" name="User Sign In Placeholder"/>

    <template id="user_sign_in" name="User Sign In" inherit_id="portal.placeholder_user_sign_in">
        <xpath expr="." position="inside">
            <li t-nocache="Profile session and user group can change unrelated to parent caches."
                t-nocache-_item_class="_item_class"
                t-nocache-_link_class="_link_class"
                groups="base.group_public" t-attf-class="#{_item_class} o_no_autohide_item">
                <a t-attf-href="/web/login" t-attf-class="#{_link_class}">Sign in<span t-if="request.session.profile_session" class="text-danger fa fa-circle"/></a>
            </li>
        </xpath>
    </template>

    <template id="portal_my_home" name="My Portal">
        <t t-call="portal.portal_layout">
            <t t-set="my_details" t-value="True"/>
            <div class="o_portal_my_home">
                <div class="oe_structure" id="oe_structure_portal_my_home_1"/>

                <div class="o_portal_my_security mb-3" t-if="((not user_is_internal) and (not agent_application)) or ((not user_is_internal) and (agent_application.state == 'cancelled'))">
                    <h3>Become an Agent </h3>
                    <a href="/agent/application"><i class="fa fa-handshake-o mx-1"/>Joint BQ Group</a>
                </div>
                <div class="o_portal_my_security mb-3" t-if="(not user_is_internal) and agent_application and agent_application.state == 'under_review'">
                    <h3 t-esc="agent_application.title" class="mb-3"/>
                    <div class="alert-info">
                        <i class="fa fa-info-circle"/>
                        <span>Your application to join BQ has been submitted for backend review. Please be patient and wait for the results</span>
                        <a role="button" class="text-decoration-underline" data-bs-toggle="modal" data-bs-target="#modalrevoke" href="#">
                            revoke
                        </a>
                    </div>
                </div>
                <div class="o_portal_my_security mb-3" t-if="(not user_is_internal) and agent_application and agent_application.state == 'rejected'">
                    <h3 t-esc="agent_application.title" class="mb-3"/>
                    <div class="alert-info">
                        <i class="fa fa-info-circle"/>
                        <p>Your application has been rejected.
                          <span t-if="agent_application.current_step_notes">
                                  reason: <t t-esc="agent_application.current_step_notes"/>
                          </span>
                        </p>
                        <a href="/agent/application">resubmit</a>
                    </div>
                </div>
                <!-- modal agent application revoke -->
                <div role="dialog" class="modal fade" id="modalrevoke">
                    <div class="modal-dialog">
                        <form id="modalrevoke" method="POST" t-attf-action="/agent/application/#{agent_application.applicant_id.id}/cancel" class="modal-content">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <header class="modal-header">
                                <h4 class="modal-title">Confirm Revoke?</h4>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </header>
                            <main class="modal-body">
                                <p>
                                    It cannot be recovered; the application will be closed.
                                </p>
                            </main>
                            <footer class="modal-footer">
                                <button type="submit" class="btn btn-danger">
                                    <i class="fa fa-times"></i> Revoke
                                </button>
                                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                                    Cancel
                                </button>
                            </footer>
                        </form>
                    </div>
                </div>

                <h3>Documents</h3>
                <div class="o_portal_docs list-group">
                    <div class="o_portal_doc_spinner spinner-border text-o-color-2 align-self-center mt-5"/>
                    <p class="o_portal_no_doc_message d-none">No Documents to display</p>
                </div>
            </div>
            <div class="oe_structure" id="oe_structure_portal_my_home_2"/>
        </t>
    </template>

    <template id="portal_docs_entry" name="My Portal Docs Entry">
        <a t-att-href="url" t-att-title="title" class="list-group-item list-group-item-action d-flex align-items-center justify-content-between d-none">
            <t t-esc="title"/>
            <t t-if='count'>
                <span class="badge text-bg-secondary rounded-pill" t-esc="count"/>
            </t>
            <t t-elif="placeholder_count">
                <span class="badge text-bg-secondary rounded-pill" t-att-data-placeholder_count="placeholder_count">
                    <i class="fa fa-spin fa-circle-o-notch"></i>
                </span>
            </t>
        </a>
    </template>

    <template id="portal_table" name="My Portal Table">
        <div t-attf-class="table-responsive border rounded border-top-0 #{classes if classes else ''}">
            <table class="table rounded mb-0 bg-white o_portal_my_doc_table">
                <t t-out="0"/>
            </table>
        </div>
        <div t-if="pager" class="o_portal_pager d-flex justify-content-center">
            <t t-call="portal.pager"/>
        </div>
    </template>

    <template id="portal_record_sidebar" name="My Portal Record Sidebar">
        <div t-attf-class="#{classes}">
            <div class="card bg-white mb-4 sticky-top" id="sidebar_content">
                <div t-if="title" class="card-body text-center pb-2 pt-3">
                    <t t-out="title"/>
                </div>
                <t t-if="entries" t-out="entries"/>
                <div class="card-footer small text-center text-muted border-top-0 pt-1 pb-1 d-none d-lg-block">
                    Powered by <a target="_blank" href="http://www.odoo.com?utm_source=db&amp;utm_medium=portal" title="odoo"><img src="/web/static/img/logo.png" alt="Odoo Logo" height="15"/></a>
                </div>
            </div>
        </div>
    </template>

    <!--
        The search bar is composed of 2 buttons : a "filter by" and a "sort by". Changing the 'sortby'
        criteria will keep the number of page, query params, ... Changing the 'filterby' param will
        redirect the user to the beginning of document list, keeping query parameters.

        These 2 buttons can be prepended by a advanced search input, to activate it, search_input need
        to be initialized at 'True' and the content of the t-call is the list of li elements searchable.

        :param dict searchbar_sortings : containing the sort criteria like
            {'date': {'label': _('Newest'), 'order': 'create_date desc'}}
        :param string sortby : name of the sort criteria
        :param dict searchbar_filters : containing the filter criteria like
            {'open': {'label': _('In Progress'), 'domain': [('state', '=', 'open')]}}
        :param string filterby : name of the filter criteria
        :param default_url : the base url of the pages (like '/my/orders')
        :param boolean breadcrumbs_searchbar : set to True to show breadcrumbs rather than the title
        :param boolean o_portal_search_panel : set to True to active the input search
        :param html $0 : content of the t-call
        :param title : bavbar title
        :param classes : navbar classes
    -->
    <template id="portal_searchbar" name="Portal Search Bar">
        <nav t-attf-class="navbar navbar-light navbar-expand-lg border py-0 mb-2 o_portal_navbar {{classes if classes else ''}} {{'mt-3 rounded' if breadcrumbs_searchbar else 'border-top-0' }}">
            <!--  Navbar breadcrumb or title  -->
            <t t-if="breadcrumbs_searchbar">
                <t t-call="portal.portal_breadcrumbs"/>
            </t>
            <span t-else="" class="navbar-brand mb-0 h1 me-auto" t-esc="title or 'No title'"/>

            <!--  Collapse button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#o_portal_navbar_content" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle filters">
                <span class="navbar-toggler-icon small"/>
            </button>

            <!--  Collapsable content  -->
            <div class="collapse navbar-collapse" id="o_portal_navbar_content">
                <div class="nav flex-column flex-lg-row ms-auto p-0 mb-3 mb-lg-0 mt-1 mt-lg-0">
                    <div t-if="searchbar_sortings">
                        <span class="small me-1 navbar-text">Sort By:</span>
                        <div class="btn-group">
                            <button id="portal_searchbar_sortby" data-bs-toggle="dropdown" class="btn btn-secondary btn-sm dropdown-toggle">
                                <t t-esc="searchbar_sortings[sortby].get('label', 'Newest')"/>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="portal_searchbar_sortby">
                                <t t-foreach="searchbar_sortings" t-as="option">
                                    <a t-att-href="request.httprequest.path + '?' + keep_query('*', sortby=option)"
                                       t-attf-class="dropdown-item#{sortby == option and ' active' or ''}">
                                        <span t-esc="searchbar_sortings[option].get('label')"/>
                                    </a>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div t-if="searchbar_filters" class="ms-lg-2">
                        <span class="small me-1 navbar-text">Filter By:</span>
                        <div class="btn-group">
                            <button id="portal_searchbar_filters" data-bs-toggle="dropdown" class="btn btn-secondary btn-sm dropdown-toggle">
                                <t t-esc="searchbar_filters.get(filterby,searchbar_filters.get('all')).get('label', 'All')"/>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="portal_searchbar_filters">
                                <t t-foreach="searchbar_filters" t-as="option">
                                    <a t-att-href="default_url + '?' + keep_query('*', filterby=option)"
                                       t-attf-class="dropdown-item#{filterby == option and ' active' or ''}">
                                        <span t-esc="searchbar_filters[option].get('label')"/>
                                    </a>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div t-if="searchbar_groupby" class="ms-lg-2">
                        <span class="small me-1 navbar-text">Group By:</span>
                        <div class="btn-group">
                            <button id="portal_searchbar_groupby" data-bs-toggle="dropdown" class="btn btn-secondary btn-sm dropdown-toggle">
                                <t t-esc="searchbar_groupby[groupby].get('label', 'None')"/>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="portal_searchbar_groupby">
                                <t t-foreach="searchbar_groupby" t-as="option">
                                    <a t-att-href="default_url + '?' + keep_query('*', groupby=option)"
                                       t-attf-class="dropdown-item#{groupby == option and ' active' or ''}">
                                        <span t-esc="searchbar_groupby[option].get('label')"/>
                                    </a>
                                </t>
                            </div>
                        </div>
                    </div>
                    <t t-out="0"/>
                </div>
                <form t-if="searchbar_inputs" class="o_portal_search_panel ms-lg-4 col-xl-4 col-md-5">
                    <div class="input-group input-group-sm w-100">
                        <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown"/>
                        <div class="dropdown-menu" role="menu">
                            <t t-foreach='searchbar_inputs' t-as='input'>
                                <a t-att-href="'#' + input_value['input']"
                                    t-attf-class="dropdown-item#{search_in == input_value['input'] and ' active' or ''}">
                                    <span t-out="input_value['label']"/>
                                </a>
                            </t>
                        </div>
                        <input type="text" class="form-control form-control-sm" placeholder="Search" t-att-value='search' name="search"/>
                        <button class="btn btn-secondary o_wait_lazy_js" type="submit">
                            <span class="fa fa-search"/>
                        </button>
                    </div>
                </form>
            </div>
        </nav>
    </template>

    <template id="portal_record_layout" name="Portal single record layout">
        <div t-attf-class="card mt-0 border-top-0 rounded-0 rounded-bottom #{classes if classes else ''}">
            <div t-if="card_header" t-attf-class="card-header #{header_classes if header_classes else ''}">
                <t t-out="card_header"/>
            </div>
            <div t-if="card_body" t-attf-class="card-body #{body_classes if body_classes else ''}">
                <t t-out="card_body"/>
            </div>
        </div>
    </template>

    <!--
    TODO adapt in master: remove the use of the "title" variable in this
    template (or rename the variable). Using it at controller level actually
    also controls the browser tab title, which makes no sense.
    -->
    <template id="portal_contact" name="Contact">
        <div class="o_portal_contact_details mb-5">
            <h4><t t-if="title" t-esc="title"/><t t-else="">Your contact</t></h4>
            <hr class="mt-1 mb0"/>
            <h6 class="mb-1"><b t-esc="sales_user.name"/></h6>
            <div class="d-flex align-items-center mb-1">
                <div class="fa fa-envelope fa-fw me-1"></div>
                <a t-att-href="'mailto:'+sales_user.email" t-esc="sales_user.email"/>
            </div>
            <div class="d-flex flex-nowrap align-items-center mb-1">
                <div class="fa fa-phone fa-fw me-1"></div>
                <span t-esc="sales_user.phone"/>
            </div>
            <div class="d-flex flex-nowrap align-items-center mb-1">
                <div class="fa fa-map-marker fa-fw me-1"></div>
                <span t-esc="sales_user.city"/>
            </div>
        </div>
    </template>

    <template id="portal_my_details_fields">
        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
        <div t-if="error_message" class="alert alert-danger" role="alert">
            <div class="col-lg-12">
                <t t-foreach="error_message" t-as="err"><t t-esc="err"/><br /></t>
            </div>
        </div>
        <div t-attf-class="mb-3 #{error.get('name') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="name">Name</label>
            <input type="text" name="name" t-attf-class="form-control #{error.get('name') and 'is-invalid' or ''}" t-att-value="name or partner.name" />
        </div>
        <div t-attf-class="mb-3 #{error.get('email') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="email">Email</label>
            <input type="email" name="email" t-attf-class="form-control #{error.get('email') and 'is-invalid' or ''}" t-att-value="email or partner.email" />
        </div>

        <div class="clearfix" />
        <div t-attf-class="mb-1 #{error.get('company_name') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label label-optional" for="company_name">Company Name</label>
            <!-- The <input> use "disabled" attribute to avoid sending an unauthorized value on form submit.
                 The user might not have rights to change company_name but should still be able to see it.
            -->
            <input type="text" name="company_name" t-attf-class="form-control #{error.get('company_name') and 'is-invalid' or ''}" t-att-value="company_name or partner.commercial_company_name" t-att-disabled="None if partner_can_edit_vat else '1'" />
            <small t-if="not partner_can_edit_vat" class="form-text text-muted d-block d-xl-none">
                Changing company name is not allowed once document(s) have been issued for your account. Please contact us directly for this operation.
            </small>
        </div>
        <div t-attf-class="mb-1 #{error.get('vat') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label label-optional" for="vat">VAT Number</label>
            <!-- The <input> use "disabled" attribute to avoid sending an unauthorized value on form submit.
                 The user might not have rights to change company_name but should still be able to see it.
            -->
            <input type="text" name="vat" t-attf-class="form-control #{error.get('vat') and 'is-invalid' or ''}" t-att-value="vat or partner.vat" t-att-disabled="None if partner_can_edit_vat else '1'" />
            <small t-if="not partner_can_edit_vat" class="form-text text-muted d-block d-xl-none">Changing VAT number is not allowed once document(s) have been issued for your account. Please contact us directly for this operation.</small>
        </div>
        <div t-if="not partner_can_edit_vat" class="col-12 d-none d-xl-block">
            <small class="form-text text-muted">Changing company name or VAT number is not allowed once document(s) have been issued for your account. <br/>Please contact us directly for this operation.</small>
        </div>
        <div t-attf-class="mb-3 #{error.get('phone') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="phone">Phone</label>
            <input type="tel" name="phone" t-attf-class="form-control #{error.get('phone') and 'is-invalid' or ''}" t-att-value="phone or partner.phone" />
        </div>

        <div class="clearfix" />
        <div t-attf-class="mb-3 #{error.get('street') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="street">Street</label>
            <input type="text" name="street" t-attf-class="form-control #{error.get('street') and 'is-invalid' or ''}" t-att-value="street or partner.street"/>
        </div>
        <div t-attf-class="mb-3 #{error.get('city') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="city">City</label>
            <input type="text" name="city" t-attf-class="form-control #{error.get('city') and 'is-invalid' or ''}" t-att-value="city or partner.city" />
        </div>
        <div t-attf-class="mb-3 #{error.get('zip') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label label-optional" for="zipcode">Zip / Postal Code</label>
            <input type="text" name="zipcode" t-attf-class="form-control #{error.get('zip') and 'is-invalid' or ''}" t-att-value="zipcode or partner.zip" />
        </div>
        <div t-attf-class="mb-3 #{error.get('country_id') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="country_id">Country</label>
            <select name="country_id" t-attf-class="form-select #{error.get('country_id') and 'is-invalid' or ''}">
                <option value="">Country...</option>
                <t t-foreach="countries or []" t-as="country">
                    <option t-att-value="country.id" t-att-selected="country.id == int(country_id) if country_id else country.id == partner.country_id.id">
                        <t t-esc="country.name" />
                    </option>
                </t>
            </select>
        </div>
        <div t-attf-class="mb-3 #{error.get('state_id') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label label-optional" for="state_id">State / Province</label>
            <select name="state_id" t-attf-class="form-select #{error.get('state_id') and 'is-invalid' or ''}">
                <option value="">select...</option>
                <t t-foreach="states or []" t-as="state">
                    <option t-att-value="state.id" style="display:none;" t-att-data-country_id="state.country_id.id" t-att-selected="state.id == int(state_id) if state_id else state.id == partner.state_id.id">
                        <t t-esc="state.name" />
                    </option>
                </t>
            </select>
        </div>
    </template>

    <template id="portal_my_details">
        <t t-call="portal.portal_layout">
            <t t-set="additional_title">Contact Details</t>
            <form action="/my/account" method="post">
                <div class="row o_portal_details">
                    <div class="col-lg-8">
                        <div class="row">
                            <t t-call="portal.portal_my_details_fields"/>
                            <input type="hidden" name="redirect" t-att-value="redirect"/>
                        </div>
                        <div class="clearfix">
                            <button type="submit" class="btn btn-primary float-end mb32 ">
                                Confirm
                                <span class="fa fa-long-arrow-right" />
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </t>
    </template>

    <template id="portal_my_security">
        <t t-call="portal.portal_layout"><div class="o_portal_security_body">
            <t t-set="additional_title">Security</t>
            <t t-set="no_breadcrumbs" t-value="1"/>
            <div class="alert alert-danger" role="alert" t-if="get_error(errors)">
                <t t-esc="errors"/>
            </div>
            <section name="portal_change_password">
                <h3>Change Password</h3>
                <t t-set="path">password</t>
                <div class="alert alert-success" role="alert" t-if="success and success.get('password')">
                    Password Updated!
                </div>
                <div class="alert alert-danger" role="alert" t-if="get_error(errors, 'password')">
                    <t t-esc="errors['password']"/>
                </div>
                <form action="/my/security" method="post" class="oe_reset_password_form">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <input type="hidden" name="op" value="password"/>
                    <div class="mb-3">
                        <label for="current">Password:</label>
                        <input type="password" t-attf-class="form-control form-control-sm {{ 'is-invalid' if get_error(errors, 'password.old') else '' }}"
                               id="current" name="old"
                               autocomplete="current-password" required="required"/>
                        <div class="invalid-feedback">
                            <t t-esc="get_error(errors, 'password.old')"/>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="new">New Password:</label>
                        <input type="password" t-attf-class="form-control form-control-sm {{ 'is-invalid' if get_error(errors, 'password.new1') else '' }}"
                               id="new" name="new1"
                               autocomplete="new-password" required="required"/>
                        <div class="invalid-feedback">
                            <t t-esc="get_error(errors, 'password.new1')"/>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="new2">Verify New Password:</label>
                        <input type="password" t-attf-class="form-control form-control-sm {{ 'is-invalid' if get_error(errors, 'password.new2') else '' }}"
                               id="new2" name="new2"
                               autocomplete="new-password" required="required"/>
                        <div class="invalid-feedback">
                            <t t-esc="get_error(errors, 'password.new2')"/>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-secondary">Change Password</button>
                </form>
            </section>
            <section t-if="debug and allow_api_keys">
                <h3>
                Developer API Keys
                    <a href="https://www.odoo.com/documentation/16.0/developer/misc/api/external_api.html#api-keys" target="_blank">
                        <i title="Documentation" class="fa fa-fw o_button_icon fa-info-circle"></i>
                    </a>
                </h3>
                <div>
                    <table class="table o_main_table">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Scope</th>
                                <th>Added On</th>
                                <th/>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="request.env.user.api_key_ids" t-as="key">
                                <tr>
                                    <td><span t-field="key.name"/></td>
                                    <td><span t-field="key.scope"/></td>
                                    <td><span t-field="key.create_date"/></td>
                                    <td>
                                        <i class="fa fa-trash text-danger o_portal_remove_api_key" type="button" t-att-id="key.id"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
                <div>
                    <button type="submit" class="btn btn-secondary o_portal_new_api_key">New API Key</button>
                </div>
            </section>
            <section name="portal_deactivate_account" groups="base.group_portal">
                <h3>Delete Account</h3>
                <t t-set="deactivate_error" t-value="get_error(errors, 'deactivate')"/>
                <button class="btn btn-secondary" data-bs-toggle="modal"
                    data-bs-target="#portal_deactivate_account_modal">
                    Delete Account
                </button>
                <div t-attf-class="modal #{'show d-block' if open_deactivate_modal else ''}"
                    id="portal_deactivate_account_modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header bg-danger">
                                <h5 class="modal-title">Are you sure you want to do this?</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <form action="/my/deactivate_account" method="post" class="modal-body"
                                id="portal_deactivate_account_form">
                                <div>
                                    <div class="alert alert-danger"
                                        t-esc="get_error(errors, 'deactivate.other')"/>
                                    <p class="text-muted">
                                        Disable your account, preventing any further login.<br/>
                                        <b>
                                            <i class="fa fa-exclamation-triangle text-danger"></i>
                                            This action cannot be undone.
                                        </b>
                                    </p>
                                    <hr/>
                                    <p>1. Enter your password to confirm you own this account</p>
                                    <input name="password" type="password" required="1"
                                        t-attf-class="form-control #{'is-invalid' if deactivate_error == 'password' else ''}"
                                        placeholder="Password"/>
                                    <div t-if="deactivate_error == 'password'" class="invalid-feedback">
                                        Wrong password.
                                    </div>
                                    <hr/>
                                    <p>
                                        2. Confirm you want to delete your account by
                                        copying down your login (<t t-esc="env.user.login"/>).
                                    </p>
                                    <input name="validation" type="text" required="1"
                                        t-attf-class="form-control #{'is-invalid' if deactivate_error == 'validation' else ''}"/>
                                    <div t-if="deactivate_error == 'validation'" class="invalid-feedback">
                                        You should enter "<t t-esc="env.user.login"/>" to validate your action.
                                    </div>
                                    <div class="d-flex flex-row align-items-center">
                                        <input type="checkbox" name="request_blacklist" id="request_blacklist" checked="1"/>
                                        <label for="request_blacklist" class="ms-2 mw-100 fw-normal mt-3">
                                            Put my email and phone in a block list to make sure I'm never contacted again
                                        </label>
                                    </div>
                                </div>
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            </form>
                            <div class="modal-footer justify-content-start">
                                <input type="submit" class="btn btn-danger" form="portal_deactivate_account_form"
                                    value="Delete Account"/>
                                <button type="button" class="btn" data-bs-dismiss="modal">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div></t>
    </template>

    <template id="portal_agent_application">
        <t t-call="portal.frontend_layout"><div class="container">
            <t t-set="additional_title">Become an Agent</t>
            <t t-set="no_breadcrumbs" t-value="1"/>
            <section class="mt32 oe_website_agent_application">
                <h3 class="mb32">Become an Agent</h3>
                <div class="steps-form-steps-container mb32">
                    <div class="steps-item-container steps-item-active" id="steps-item-container-1" data-id="1">
                        <div class="steps-item-content">
                            <div class="steps-item-icon"><i class="fa fa-user-o" aria-hidden="true"/></div>
                            <div class="steps-item-title">Personal information</div>
                        </div>
                    </div>
                    <div class="steps-item-container" id="steps-item-container-2" data-id="2">
                        <div class="steps-item-content">
                            <div class="steps-item-icon"><i class="fa fa-address-card-o" aria-hidden="true"/></div>
                            <div class="steps-item-title">Agent information</div>
                        </div>
                    </div>
                    <div class="steps-item-container" id="steps-item-container-3" data-id="3">
                        <div class="steps-item-content">
                            <div class="steps-item-icon"><i class="fa fa-folder-o" aria-hidden="true"/></div>
                            <div class="steps-item-title">Upload files</div>
                        </div>
                    </div>
                </div>
                <div t-if="record and record.current_step_notes and record.state == 'rejected'" class="alert alert-warning oe_button_box" role="alert">
                    <p class="mt-3">
                        The reason for the previous application being rejected is <b t-esc="record.current_step_notes"/>
                    </p>
                </div>
                <form id="agent_application_form" action="/agent/application" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="language_ids" value="" id="language_ids"/>
                    <div class="row mb32" id="step-form-1">
                        <div t-attf-class="mb-3 #{error.get('last_name') and 'o_has_error' or ''} col-lg-6" id="div_last_name">
                            <label class="col-form-label" for="last_name">Last name</label>
                            <input type="text" name="last_name" required="required" t-attf-class="form-control #{error.get('last_name') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('first_name') and 'o_has_error' or ''} col-lg-6" id="div_first_name">
                            <label class="col-form-label" for="first_name">First name</label>
                            <input type="text" name="first_name" required="required" t-attf-class="form-control #{error.get('first_name') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('nick_name') and 'o_has_error' or ''} col-lg-6" id="div_nick_name">
                            <label class="col-form-label label-optional" for="nick_name">Nick name</label>
                            <input type="text" name="nick_name" t-att-value="record and record.nick_name" t-attf-class="form-control #{error.get('nick_name') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('country_id') and 'o_has_error' or ''} col-lg-6 div_country">
                            <label class="col-form-label" for="country_id">Country</label>
                            <select id="country_id" name="country_id" t-attf-class="form-select #{error.get('country_id') and 'is-invalid' or ''}">
                                <option value="">Country...</option>
                                <t t-foreach="countries" t-as="c">
                                    <option t-att-value="c.id" t-att-selected="record and record.country_id and (c.id == record.country_id.id)">
                                        <t t-esc="c.name" />
                                    </option>
                                </t>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('state_id') and 'o_has_error' or ''} col-lg-3 div_state" t-att-style="(not country or not country.state_ids) and 'display: none'">
                            <label class="col-form-label" for="state_id">State / Province</label>
                            <select id="state_id" name="state_id" t-attf-class="form-select #{error.get('state_id') and 'is-invalid' or ''}" data-init="1">
                                <option value="">State / Province...</option>
                                <t t-foreach="country_states" t-as="s">
                                    <option t-att-value="s.id" t-att-selected="record and record.state_id and (s.id == record.state_id.id)">
                                        <t t-esc="s.name" />
                                    </option>
                                </t>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('city_id') and 'o_has_error' or ''} col-md-6 div_city" style="display: none">
                            <label class="col-form-label" for="city_id">City</label>
                            <select name="city_id" t-attf-class="form-select #{error.get('city_id') and 'is-invalid' or ''}">
                                <option value="">City...</option>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('zip_code') and 'o_has_error' or ''} col-md-3 div_zip">
                            <label class="col-form-label label-optional" for="zip_code">Zip Code</label>
                            <input type="text" name="zip_code" t-att-value="record and record.zip_code" t-attf-class="form-control #{error.get('zip_code') and 'is-invalid' or ''}" />
                        </div>
                        <div t-attf-class="mb-3 #{error.get('street') and 'o_has_error' or ''} col-lg-12 div_street">
                            <label class="col-form-label" for="street">Street <span class="d-none d-md-inline"> and Number</span></label>
                            <input type="text" name="street" t-att-value="record and record.street" required="required" t-attf-class="form-control #{error.get('street') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('phone') and 'o_has_error' or ''} col-lg-6" id="div_phone">
                            <label class="col-form-label" for="phone">Phone</label>
                            <input type="tel" name="phone" t-att-value="record and record.phone" required="required" t-attf-class="form-control #{error.get('phone') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('ssnid') and 'o_has_error' or ''} col-lg-6" id="div_ssn">
                            <label class="col-form-label" for="ssnid">SSN</label>
                            <input type="text" name="ssnid" t-att-value="record and record.ssnid" required="required" t-attf-class="form-control #{error.get('ssnid') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('emergency_contact_name') and 'o_has_error' or ''} col-lg-6" id="div_emergency_contact_name">
                            <label class="col-form-label" for="emergency_contact_name">Emergency contact name</label>
                            <input type="text" name="emergency_contact_name" t-att-value="record and record.emergency_contact_name" required="required" t-attf-class="form-control #{error.get('emergency_contact_name') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('emergency_contact_phone') and 'o_has_error' or ''} col-lg-6" id="div_emergency_contact_phone">
                            <label class="col-form-label" for="emergency_contact_phone">Emergency contact phone</label>
                            <input type="tel" name="emergency_contact_phone" t-att-value="record and record.emergency_contact_phone" required="required" t-attf-class="form-control #{error.get('emergency_contact_phone') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('working_languages') and 'o_has_error' or ''} col-lg-6 div_working_languages" id="div_working_languages">
                            <label class="col-form-label" for="working_languages">Working Languages</label>
                            <div class="checkbox-group">
                                <t t-foreach="working_languages" t-as="lg">
                                    <div class="checkbox-item">
                                        <input type="checkbox" name="language_id" t-att-value="lg.id" t-att-checked="record and record.language_ids and (lg.id in record.language_ids.ids)" />
                                        <label class="label-optional"><t t-esc="lg.name"/></label>
                                    </div>
                                </t>
                            </div>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('website') and 'o_has_error' or ''} col-lg-6" id="div_website">
                            <label class="col-form-label label-optional" for="website">Website URL</label>
                            <input type="tel" name="website" t-att-value="record and record.website" t-attf-class="form-control #{error.get('website') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('has_driver_license') and 'o_has_error' or ''} col-lg-6 div_has_driver_license" id="div_has_driver_license">
                            <label class="col-form-label" for="has_driver_license">Valid ID</label>
                            <select name="has_driver_license" required="required" t-attf-class="form-select #{error.get('has_driver_license') and 'is-invalid' or ''}">
                                <option value="True" t-att-selected="record and record.has_driver_license">Driver's license</option>
                                <option value="False" t-att-selected="record and record.has_driver_license == False">Other documents</option>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('other_license_type') and 'o_has_error' or ''} col-lg-6" id="div_other_license_type">
                            <label class="col-form-label label-optional" for="other_license_type"/>
                            <input type="text" name="other_license_type" t-att-value="record and record.other_license_type" t-attf-class="form-control #{error.get('other_license_type') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('driver_license_no') and 'o_has_error' or ''} col-lg-6" id="div_driver_license_no">
                            <label class="col-form-label" for="driver_license_no">ID number</label>
                            <input type="tel" name="driver_license_no" t-att-value="record and record.driver_license_no" required="required" t-attf-class="form-control #{error.get('driver_license_no') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('driver_license_exp_date') and 'o_has_error' or ''} col-lg-6" id="div_driver_license_exp_date">
                            <label class="col-form-label" for="driver_license_exp_date">ID expire date</label>
                            <input type="date" name="driver_license_exp_date" t-att-value="record and record.driver_license_exp_date" data-date-format="YYYY-MM-DD" required="required" t-attf-class="form-control #{error.get('certificate_number') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('birthday') and 'o_has_error' or ''} col-lg-6" id="div_birthday">
                            <label class="col-form-label" for="birthday">Birthday</label>
                            <input type="date" name="birthday" required="required" t-att-value="record and record.birthday" data-date-format="YYYY-MM-DD" t-attf-class="form-control #{error.get('birthday') and 'is-invalid' or ''}"/>
                        </div>
                        <div class="btn-container">
                            <a class="btn btn-primary mb-32 mt-32 step-next-button" role="button" href="#"> Next <i class="fa fa-chevron-right"/></a>
                        </div>
                    </div>
                    <div class="row" id="step-form-2" style="display:none">
                        <div t-attf-class="mb-3 #{error.get('w9_type') and 'o_has_error' or ''} col-lg-6" id="div_w9_type">
                            <label class="col-form-label" for="w9_type">W9 type</label>
                            <select name="w9_type" required="required" t-attf-class="form-select #{error.get('w9_type') and 'is-invalid' or ''}" data-init="1">
                                <t t-foreach="[('business', 'Business'), ('personal', 'Personal')]" t-as="s">
                                    <option t-att-value="s[0]" t-att-selected="record and record.w9_type == s[0]">
                                        <t t-esc="s[1]" />
                                    </option>
                                </t>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('business_name') and 'o_has_error' or ''} col-lg-6" id="div_business_name">
                            <label class="col-form-label" for="business_name">Business name</label>
                            <input type="text" name="business_name" t-att-value="record and record.business_name" required="required" t-attf-class="form-control #{error.get('business_name') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('ein') and 'o_has_error' or ''} col-lg-6" id="div_ein">
                            <label class="col-form-label" for="ein">EIN#</label>
                            <input type="text" name="ein" t-att-value="record and record.ein" required="required" t-attf-class="form-control #{error.get('ein') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('business_addr') and 'o_has_error' or ''} col-lg-6" id="div_business_addr">
                            <label class="col-form-label" for="business_addr">Business Address</label>
                            <input type="text" name="business_addr" t-att-value="record and record.business_addr" t-attf-class="form-control #{error.get('business_addr') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('federal_tax_type') and 'o_has_error' or ''} col-lg-6" id="div_federal_tax_type">
                            <label class="col-form-label" for="federal_tax_type">Federal tax classification</label>
                            <select name="federal_tax_type" required="required" t-attf-class="form-select #{error.get('federal_tax_type') and 'is-invalid' or ''}" data-init="1">
                                <option value="sole" t-att-selected="record and record.federal_tax_type == 'sole'">Sole Proprietor Or Single-Member LLC</option>
                                <option value="partnership" t-att-selected="record and record.federal_tax_type == 'partnership'">Partnership</option>
                                <option value="trust" t-att-selected="record and record.federal_tax_type == 'trust'">Trust/Estate</option>
                                <option value="c_corporation" t-att-selected="record and record.federal_tax_type == 'c_corporation'">C Corporation</option>
                                <option value="s_corporation" t-att-selected="record and record.federal_tax_type == 's_corporation'">S Corporation</option>
                                <option value="llc" t-att-selected="record and record.federal_tax_type == 'llc'">Limited Liability Company</option>
                                <option value="other" t-att-selected="record and record.federal_tax_type == 'other'">Other</option>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('federal_tax_type_other') and 'o_has_error' or ''} col-lg-6" id="div_federal_tax_type_other">
                            <label class="col-form-label label-optional" for="federal_tax_type_other"/>
                            <input type="text" name="federal_tax_type_other" t-att-value="record and record.federal_tax_type_other" t-attf-class="form-control #{error.get('federal_tax_type_other') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('agent_is_currently_licensed') and 'o_has_error' or ''} col-lg-6" id="div_agent_is_currently_licensed">
                            <label class="col-form-label" for="agent_is_currently_licensed">Is currently licensed?</label>
                            <select name="agent_is_currently_licensed" required="required" t-attf-class="form-select #{error.get('agent_is_currently_licensed') and 'is-invalid' or ''}" data-init="1">
                                <option value="True" t-att-selected="record and record.agent_is_currently_licensed">Yes</option>
                                <option value="False" t-att-selected="record and record.agent_is_currently_licensed == False">No</option>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('is_from_bq_license_school') and 'o_has_error' or ''} col-lg-6 div_is_from_bq_license_school">
                            <label class="col-form-label" for="is_from_bq_license_school">Is from BQ license school</label>
                            <select name="is_from_bq_license_school" required="required" t-attf-class="form-select #{error.get('is_from_bq_license_school') and 'is-invalid' or ''}" data-init="1">
                                <option value="True" t-att-selected="record and record.is_from_bq_license_school">Yes</option>
                                <option value="False" t-att-selected="record and record.is_from_bq_license_school == False">No</option>
                            </select>
                        </div>
                        <div id="div_license_type" t-attf-class="mb-3 #{error.get('DRE_license_type') and 'o_has_error' or ''} col-lg-6 div_license_type">
                            <label class="col-form-label" for="DRE_license_type">License type</label>
                            <select name="DRE_license_type" required="required" t-attf-class="form-select #{error.get('DRE_license_type') and 'is-invalid' or ''}" data-init="broker">
                                <option value="broker" t-att-selected="record and record.DRE_license_type == 'broker'">Broker</option>
                                <option value="salesperson" t-att-selected="record and record.DRE_license_type == 'salesperson'">Salesperson</option>
                                <option value="appraiser" t-att-selected="record and record.DRE_license_type == 'appraiser'">Appraiser</option>
                                <option value="corporation" t-att-selected="record and record.DRE_license_type == 'corporation'">Corporation</option>
                                <option value="limited_partnership" t-att-selected="record and record.DRE_license_type == 'limited_partnership'">Limited Partnership</option>
                                <option value="other" t-att-selected="record and record.DRE_license_type == 'other'">Other</option>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('DRE_license_type_other') and 'o_has_error' or ''} col-lg-6" id="div_license_type_other">
                            <label class="col-form-label label-optional" for="DRE_license_type_other"/>
                            <input type="text" name="DRE_license_type_other" t-att-value="record and record.DRE_license_type_other" t-attf-class="form-control #{error.get('DRE_license_type_other') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('DRE_license_no') and 'o_has_error' or ''} col-lg-6" id="div_DRE_license_no">
                            <label class="col-form-label" for="DRE_license_no">DRE#</label>
                            <input type="text" name="DRE_license_no" t-att-value="record and record.DRE_license_no" required="required" t-attf-class="form-control #{error.get('DRE_license_no') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('DRE_license_exp_date') and 'o_has_error' or ''} col-lg-6" id="div_DRE_license_exp_date">
                            <label class="col-form-label" for="DRE_license_exp_date">License expiration date</label>
                            <input type="date" name="DRE_license_exp_date" t-att-value="record and record.DRE_license_exp_date" data-date-format="YYYY-MM-DD" required="required" t-attf-class="form-control #{error.get('DRE_license_exp_date') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('previous_broker') and 'o_has_error' or ''} col-lg-6" id="div_previous_broker">
                            <label class="col-form-label" for="previous_broker">Previous broker</label>
                            <input type="text" name="previous_broker" t-att-value="record and record.previous_broker" required="required" t-attf-class="form-control #{error.get('previous_broker') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('has_NMLS_license') and 'o_has_error' or ''} col-lg-6 div_has_NMLS_license" id="div_has_NMLS_license">
                            <label class="col-form-label" for="has_NMLS_license">Are you a loan officer?</label>
                            <select name="has_NMLS_license" required="required" t-attf-class="form-select #{error.get('has_NMLS_license') and 'is-invalid' or ''}" data-init="1">
                                <option value="False" t-att-selected="record and record.has_NMLS_license == False">No</option>
                                <option value="True" t-att-selected="record and record.has_NMLS_license">Yes</option>
                            </select>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('NMLS_license_no') and 'o_has_error' or ''} col-lg-6" id="div_nmls">
                            <label class="col-form-label" for="NMLS_license_no">NMLS#</label>
                            <input type="text" name="NMLS_license_no" t-att-value="record and record.NMLS_license_no" t-attf-class="form-control #{error.get('NMLS_license_no') and 'is-invalid' or ''}"/>
                        </div>
                        <!-- <div t-attf-class="mb-3 #{error.get('association_ids') and 'o_has_error' or ''} col-lg-12" id="div_association_ids">
                            <label class="col-form-label" for="association_ids">Current Board</label>
                            <div class="oe_portal_agent_application_association_ids">
                                <input type="text" name="input_value1[]" class="col-lg-5" placeholder="Input 1"/>
                                <input type="text" name="input_value2[]" class="col-lg-5" placeholder="Input 2"/>
                                <a class="fa fa-plus-square-o operating-button"/>
                                <a class="fa fa-minus-square-o operating-button"/>
                            </div>
                        </div> -->
                        <div class="btn-container">
                            <a class="btn btn-secondary step-prev-button" role="button" href="#"> Prev <i class="fa fa-chevron-left"/></a>
                            <a class="btn btn-primary step-next-button" role="button" href="#"> Next <i class="fa fa-chevron-right"/></a>
                        </div>
                    </div>
                    <div class="row" id="step-form-3" style="display:none">
                        <div t-attf-class="mb-3 #{error.get('driver_license_file') and 'o_has_error' or ''} col-lg-6" id="div_driver_license_file">
                            <label class="col-form-label label-optional" for="driver_license_file">DRE License affiliated with BQ</label>
                            <input type="file" name="driver_license_file" t-attf-class="form-control #{error.get('driver_license_file') and 'is-invalid' or ''}"/>
                            <a href="#" style="font-size: 0.75rem">Click for Instructions</a>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('w9_file') and 'o_has_error' or ''} col-lg-6" id="div_w9_file">
                            <label class="col-form-label" for="w9_file">W9</label>
                            <input type="file" name="w9_file" accept="image/*,application/pdf" required="required" t-attf-class="form-control #{error.get('w9_file') and 'is-invalid' or ''}"/>
                            <a href="#" style="font-size: 0.75rem">Download template</a>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('id_file_p1') and 'o_has_error' or ''} col-lg-6" id="div_id_file_p1">
                            <label class="col-form-label label-optional" for="id_file_p1">ID File(Page 1)</label>
                            <input type="file" name="id_file_p1" accept="image/*" t-attf-class="form-control #{error.get('id_file_p1') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('id_file_p2') and 'o_has_error' or ''} col-lg-6" id="div_id_file_p2">
                            <label class="col-form-label label-optional" for="id_file_p2">ID File(Page 2)</label>
                            <input type="file" name="id_file_p2" accept="image/*" t-attf-class="form-control #{error.get('id_file_p2') and 'is-invalid' or ''}"/>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('photo_file') and 'o_has_error' or ''} col-lg-6" id="div_photo_file">
                            <label class="col-form-label label-optional" for="photo_file">Professional photo</label>
                            <input type="file" name="photo_file" accept="image/*,application/pdf" t-attf-class="form-control #{error.get('photo_file') and 'is-invalid' or ''}"/>
                            <a href="#" style="font-size: 0.75rem">Click here to see photo example</a>
                        </div>
                        <div t-attf-class="mb-3 #{error.get('other_license_file') and 'o_has_error' or ''} col-lg-6" id="div_other_license_file">
                            <label class="col-form-label label-optional" for="other_license_file">Other</label>
                            <input type="file" name="other_license_file" multiple="multiple" t-attf-class="form-control #{error.get('other_license_file') and 'is-invalid' or ''}"/>
                        </div>
                        <div class="btn-container">
                            <a class="btn btn-primary step-prev-button" role="button" href="#"> Prev <i class="fa fa-chevron-left" /></a>
                            <button type="submit" class="btn btn-secondary">Apply</button>
                        </div>
                    </div>
                </form>
            </section>
        </div></t>
    </template>

    <template id="record_pager" name="Portal Record Pager">
        <t t-if='prev_record or next_record'>
            <div class="record_pager btn-group" role="group">
                <a role="button" t-att-class="'btn btn-link %s' % ('disabled' if not prev_record else '')" t-att-href="prev_record or '#'" ><i class="fa fa-chevron-left" role="img" aria-label="Previous" title="Previous"></i></a>
                <a role="button" t-att-class="'btn btn-link %s' % ('disabled' if not next_record else '')" t-att-href="next_record or '#'" ><i class="fa fa-chevron-right" role="img" aria-label="Next" title="Next"></i></a>
            </div>
        </t>
    </template>

    <template id="pager" name="Pager">
        <ul t-if="pager['page_count'] > 1" t-attf-class="#{ classname or '' } pagination m-0 #{_classes}" t-att-style="style or None">
            <li t-attf-class="page-item #{'disabled' if pager['page']['num'] == 1 else ''}">
                <a t-att-href=" pager['page_previous']['url'] if pager['page']['num'] != 1 else None" t-attf-class="page-link #{extraLinkClass}">
                    <span class="fa fa-chevron-left" role="img" aria-label="Previous" title="Previous"/>
                </a>
            </li>
            <t t-foreach="pager['pages']" t-as="page">
                <li t-attf-class="page-item #{'active' if page['num'] == pager['page']['num'] else ''}"> <a t-att-href="page['url']" t-attf-class="page-link #{extraLinkClass}" t-out="page['num']"/></li>
            </t>
            <li t-attf-class="page-item #{'disabled' if pager['page']['num'] == pager['page_count'] else ''}">
                <a t-att-href="pager['page_next']['url'] if pager['page']['num'] != pager['page_count'] else None" t-attf-class="page-link #{extraLinkClass}">
                    <span class="fa fa-chevron-right" role="img" aria-label="Next" title="Next"/>
                </a>
            </li>
        </ul>
    </template>

    <template id="my_account_link" name="Link to frontend portal" inherit_id="portal.user_dropdown">
        <xpath expr="//*[@id='o_logout_divider']" position="before">
            <a href="/my/home" role="menuitem" class="dropdown-item ps-3">
                <i class="fa fa-fw fa-id-card-o me-1 small text-muted"/> My Account
            </a>
            <a href="/my/orders" role="menuitem" class="dropdown-item ps-3">
                <i class="fa fa-fw fa-file-text-o me-1 small text-muted"/> My Orders
            </a>
        </xpath>
    </template>

    <!--
        Generic chatter template for the frontend
        This template provide the container of the chatter. The rest is done in js.
        To use this template, you need to call it after setting the following variable in your template or in your controller:
            :object browserecord : the mail_thread object
            :message_per_page int (optional): number of message per chatter page
            :token string (optional): if you want your chatter to be available for non-logged user,
                     you can use a token to verify the identity of the user;
                     the message will be posted with the identity of the partner_id of the object
            :hash : signed token with the partner_id using `_sign_token` method (on mail.thread)
            :pid : identifier of the partner signing the token

        NOTE: for standard portal flows, _get_page_view_values should be used to properly setup the template parameters
    -->
    <template id="message_thread">
        <div id="discussion" data-anchor="true"
            class="d-print-none o_portal_chatter o_not_editable p-0"
            t-att-data-token="token"
            t-att-data-res_model="object._name"
            t-att-data-pid="pid"
            t-att-data-hash="hash"
            t-att-data-res_id="object.id"
            t-att-data-pager_step="message_per_page or 10"
            t-att-data-allow_composer="'0' if disable_composer else '1'"
            t-att-data-two_columns="'true' if two_columns else 'false'">
        </div>
    </template>

    <!--
        Snippet to request user signature in the portal. The feature comes with
        the JS file `portal_signature.js`.

        The following variable has to be set:
            - {string} call_url: url where to send the name and signature by RPC
                The url should contain a query string if additional parameters
                have to be sent, such as an access token.

        The following variables are optional:
            - {string} default_name: the default name to display
            - {string} mode: 'draw', 'auto', or 'load'
            - {string} send_label: label of the send button
            - {number} signature_ratio: ratio of the signature area
            - {string} signature_type: 'signature' or 'initial'

        For the default values and more information, see init() of the widgets
        SignatureForm and NameAndSignature.
    -->
    <template id="portal.signature_form" name="Ask Signature">
        <div class="o_portal_signature_form"
            t-att-data-call-url="call_url"
            t-att-data-default-name="default_name"
            t-att-data-mode="mode"
            t-att-data-send-label="send_label"
            t-att-data-signature-ratio="signature_ratio"
            t-att-data-signature-type="signature_type"
            t-att-data-font-color="font_color"
            />
    </template>

    <template id="portal_sidebar" name="Sidebar">
        <t t-call="portal.portal_layout">
            <body data-bs-spy="scroll" data-target=".navspy" data-offset="50">
                <div class="container o_portal_sidebar"></div>
                <div class="oe_structure mb32" id="oe_structure_portal_sidebar_1"/>
            </body>
        </t>
    </template>
</odoo>
